{{ define "main" }}
<main class="project-main w-full max-w-4xl px-5 flex flex-col items-center">

    {{ if .Params.math | default .Site.Params.math }}
        {{ partial "math.html" . }}
    {{ end }}

    {{ $currentURL := .RelPermalink }}
    {{ $projectPages := where (where .Site.RegularPages "Section" "projects") "Lang" .Lang }}
    
    <nav class="project-nav opacity-0 animate-fade-in-up-delay-2">
        <div class="w-full max-w-4xl mx-auto px-5">
            <ul class="buttons flex flex-col md:flex-row justify-between items-stretch relative">
            {{- $pages := $projectPages.ByWeight }}
            {{- range $index, $page := $pages }}
            {{- $isActive := eq $page.RelPermalink $currentURL }}
            <li class="flex-1 group relative flex justify-center perspective-1000">
                <a href="{{ $page.RelPermalink }}" class="nav-item button block w-full transition-all duration-300 origin-center text-center rounded-xl bg-transparent {{ if $isActive }}active{{ end }}">
                    {{ index (dict "1" "I" "2" "II" "3" "III" "4" "IV" "5" "V") (cast.ToString $page.Weight) | default $page.Weight }}
                </a>
            </li>
            {{ if ne (add $index 1) (len $pages) }}
            <li class="hidden md:block w-px bg-slate-200 self-stretch my-3 z-0"></li>
            {{ end }}
            {{- end }}
            </ul>
        </div>
    </nav>

    <article class="project-article w-full opacity-0 animate-fade-in-up-delay-1 max-w-none">
        
        <header class="project-header text-center">
            <h1 class="project-title font-serif font-bold">{{ .Title }}</h1>
            {{ if .Params.description }}
            <p class="project-description text-text-muted font-sans mt-0">{{ .Params.description }}</p>
            {{ end }}
        </header>

        <div class="content prose prose-slate dark:prose-invert max-w-none text-base leading-relaxed">
            {{ .Content }}
        </div>
    </article>

</main>
{{ end }}